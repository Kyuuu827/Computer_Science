## π HTTP & HTTPS 

## HTTP(HyperText Transfer Protocol)

> μ§€λ‚λ² μ‘μ„±ν• [HTTP](https://velog.io/@lck0827/TIL-031-HTTP) κΈ€μ„ ν†µν•΄ HTTPμ— λ€ν•΄ κ°„λµν•κ² μ •λ¦¬ν•μ μ΄ μμ—λ‹¤. μ΄λ²μ—λ” μΆ€ λ” μμ„Έν•κ² κ³µλ¶€ν•κ³ , λ³΄μ•μ΄ κ°•ν™”λ HTTPSμ— λ€ν•΄μ„λ„ μ•μ•„λ³΄κ³ μ ν•λ‹¤. 

### HTTP λ€?

- μΈν„°λ„· μƒμ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μμ›μ„ μ£Όκ³  λ°›μ„ λ• μ“°λ” ν†µμ‹  κ·μ•½(protocol)
  - ν”„λ΅ν† μ½(protocol)μ΄λ€, μ»΄ν“¨ν„° λ‚΄λ¶€ λλ” μ»΄ν“¨ν„° μ‚¬μ΄μ—μ„ λ°μ΄ν„°μ κµν™ λ°©μ‹μ„ μ •μν•λ” κ·μΉ™ μ²΄κ³„μ΄λ‹¤. κΈ°κΈ° κ°„ ν†µμ‹ μ€ κµν™ λλ” λ°μ΄ν„°μ ν•μ‹μ— λ€ν•΄ μƒνΈ ν•©μλ¥Ό μ”κµ¬ν•λ‹¤. μ΄λ° ν•μ‹μ„ μ •μν•λ” κ·μΉ™μ μ§‘ν•©
  
- λ‹¤μ‹ λ§ν•΄, HTTPλ” μΈν„°λ„·μ—μ„ ν•μ΄νΌν…μ¤νΈλ¥Ό κµν™ν•κΈ° μ„ν• ν†µμ‹  κ·μ•½μΌλ΅, **80λ² ν¬νΈ**λ¥Ό μ‚¬μ©ν•κ³  μλ‹¤. λ”°λΌμ„ HTTP μ„λ²„κ°€ 80λ² ν¬νΈμ—μ„ μ”μ²­μ„ κΈ°λ‹¤λ¦¬κ³  μμΌλ©°, ν΄λΌμ΄μ–ΈνΈλ” 80λ² ν¬νΈλ΅ μ”μ²­μ„ λ³΄λ‚΄κ² λλ‹¤.

### HTTPμ νΉμ§•
**1.  Request / Response (μ”μ²­ / μ‘λ‹µ)**

- HTTP ν†µμ‹ μ ν•µμ‹¬μ€ μ”μ²­(request)κ³Ό μ‘λ‹µ(response)μ΄λ‹¤. 

- λΈλΌμ°μ €μ— URLμ„ μ…λ ¥ν•λ©΄ HTTP ν‘μ¤€μ— λ”°λΌ URLμ„ μ”μ²­ λ©”μ‹μ§€λ΅ λ³€ν™ν•κ³  TCP/IPλ¥Ό μ‚¬μ©ν•μ—¬ μΈν„°λ„·μ„ ν†µν•΄ μ”μ²­(request)μ„ λ³΄λ‚Έλ‹¤. μ›Ή μ„λ²„λ” μ”μ²­μ„ μμ‹ ν•κ³  ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν• μ›Ή νμ΄μ§€λ¥Ό λ°ν™(response)ν•λ‹¤.
 
**2. Stateless**

- κ°κ°μ HTTP ν†µμ‹ (μ”μ²­/μ‘λ‹µ)μ€ λ…λ¦½μ  μ΄κΈ° λ•λ¬Έμ— κ³Όκ±°μ ν†µμ‹ (μ”μ²­/μ‘λ‹µ)μ— λ€ν• λ‚΄μ©μ„ μ „ν€ μ•μ§€ λ»ν•λ‹¤. 

- λ”°λΌμ„ λ§¤ ν†µμ‹ λ§λ‹¤ ν•„μ”ν• λ¨λ“  μ •λ³΄λ¥Ό λ‹΄μ•„μ„ μ”μ²­μ„ λ³΄λ‚΄μ•Ό ν•λ‹¤. 

- λ§μΌ μ—¬λ¬λ²μ ν†µμ‹ (μ”μ²­/μ‘λ‹µ)μ μ§„ν–‰κ³Όμ •μ—μ„ μ—°μ†λ λ°μ΄ν„° μ²λ¦¬κ°€ ν•„μ”ν• κ²½μ°(ex. μ¨λΌμΈ μ‡Όν•‘λ°μ—μ„ λ΅κ·ΈμΈ ν›„ μ¥λ°”κµ¬λ‹ κΈ°λ¥)λ¥Ό μ„ν•΄ λ΅κ·ΈμΈ ν† ν° λλ” λΈλΌμ°μ €μ μΏ ν‚¤, μ„Έμ…, λ΅μ»¬μ¤ν† λ¦¬μ§€ κ°™μ€ κΈ°μ μ΄ νƒ„μƒν•μ€λ‹¤.

### HTTP Request κµ¬μ΅° 
**1. Start line **
: HTTP Method, νƒ€κ² url, HTTP version

**2. Headers **
```
Headers: {
	Host: μ”μ²­μ„ λ³΄λ‚΄λ” λ©ν‘(νƒ€κ²)μ μ£Όμ†. μ¦‰, μ”μ²­μ„ λ³΄λ‚΄λ” μ›Ήμ‚¬μ΄νΈμ κΈ°λ³Έ μ£Όμ†κ°€ λλ‹¤
	(ex. www.google.com)
    	User-Agent: μ”μ²­μ„ λ³΄λ‚΄λ” ν΄λΌμ΄μ–ΈνΈμ λ€ν• μ •λ³΄ (ex. chrome, firefox, safari, explorer)
	Content-Type: ν•΄λ‹Ή μ”μ²­μ΄ λ³΄λ‚΄λ” λ©”μ„Έμ§€ bodyμ νƒ€μ… (ex. application/json)
	Content-Length: body λ‚΄μ©μ κΈΈμ΄
	Authorization: νμ›μ μΈμ¦/μΈκ°€λ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄ λ΅κ·ΈμΈ ν† ν°μ„ Authroization μ— λ‹΄λ”λ‹¤
}
```

**3. Body**
: ν•΄λ‹Ή μ”μ²­μ μ‹¤μ  λ‚΄μ©μ΄ λ‹΄κΈ΄λ‹¤. μ£Όλ΅ POST λ©”μ„λ“λ¥Ό μ‚¬μ©ν•  λ• bodyμ— λ‚΄μ©μ΄ λ‹΄κΈ΄λ‹¤. 

```
Body: {
	"name": "Chankyu"
	"email": "chankyu@gmail.com"
}
```

![](https://images.velog.io/images/lck0827/post/f2049bd4-97e0-4a71-86d0-7aba4ddc6345/image.png)

### HTTP Response κµ¬μ΅°

**1. Status line**
: μ‘λ‹µμ μƒνƒ μ¤„μ΄λ‹¤. μ‘λ‹µμ€ μ”μ²­μ— λ€ν• μ²λ¦¬μƒνƒλ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² μ•λ ¤μ£Όλ©΄μ„ λ‚΄μ©μ„ μ‹μ‘ν•λ‹¤. μ‘λ‹µμ Status Line λ„ μ„Έ λ¶€λ¶„μΌλ΅ κµ¬μ„±λλ‹¤.
>  1. HTTP Version: μ”μ²­μ HTTPλ²„μ „κ³Ό λ™μΌ
 2. Status Code: μ‘λ‹µ λ©”μ„Έμ§€μ μƒνƒ μ½”λ“
 3. Status Text: μ‘λ‹µ λ©”μ„Έμ§€μ μƒνƒλ¥Ό κ°„λµν•κ² μ„¤λ…ν•΄μ£Όλ” ν…μ¤νΈ

**2. Headers**
: μ”μ²­μ ν—¤λ”μ™€ λ™μΌν•λ‹¤. μ‘λ‹µμ μ¶”κ°€ μ •λ³΄(λ©”νƒ€ λ°μ΄ν„°)λ¥Ό λ‹΄κ³ μλ” λ¶€λ¶„μ΄λ‹¤. λ‹¤λ§, μ‘λ‹µμ—μ„λ§ μ‚¬μ©λλ” ν—¤λ”μ μ •λ³΄λ“¤μ΄ μλ‹¤. (ex. μ”μ²­ν•λ” λΈλΌμ°μ €μ μ •λ³΄κ°€ λ‹΄κΈ΄ User-Agent λ€μ‹ , Server ν—¤λ”κ°€ μ‚¬μ©λλ‹¤.)

**3. Body**
: μ”μ²­μ Bodyμ™€ μΌλ°μ μΌλ΅ λ™μΌν•λ‹¤. μ”μ²­μ λ©”μ†λ“μ— λ”°λΌ Bodyκ°€ ν•­μƒ μ΅΄μ¬ν•μ§€ μ•λ“―μ΄. μ‘λ‹µλ„ μ‘λ‹µμ ν•νƒμ— λ”°λΌ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  ν•„μ”κ°€ μ—†λ” κ²½μ°μ—” Bodyκ°€ μ—†μ„ μλ„ μλ‹¤. κ°€μ¥ λ§μ΄ μ‚¬μ©λλ” Body μ λ°μ΄ν„° νƒ€μ…μ€ JSON(JavaScript Object Notation) μ΄λ‹¤.


![](https://images.velog.io/images/lck0827/post/5c0852e9-38e7-4066-b14e-7c0d3b75b18f/image.png)



> π‘‰ HTTPλ” μ• ν”λ¦¬μΌ€μ΄μ… λ λ²¨μ ν”„λ΅ν† μ½λ΅ TCP/IP μ„μ—μ„ μ‘λ™ν•λ‹¤. 
π‘‰ HTTPλ” μ•”νΈν™”κ°€ λμ§€ μ•μ€ ν…μ¤νΈ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” ν”„λ΅ν† μ½μ΄μ€κΈ° λ•λ¬Έμ—, λ„κµ°κ°€ λ„¤νΈμ›ν¬μ—μ„ μ‹ νΈλ¥Ό κ°€λ΅μ±„λ©΄ λ‚΄μ©μ΄ λ…Έμ¶λλ” λ³΄μ• μ΄μκ°€ μ΅΄μ¬ν•λ‹¤. 
π‘‰ μ΄λ¬ν• λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ HTTPSκ°€ λ“±μ¥ν•κ² λμ—λ‹¤.

---


## HTTPS(HyperText Transfer Protocol Secure)

### HTTPS λ€?
- HyperText Transfer Protocol over Secure Socket Layer, HTTP over TLS, HTTP over SSL, HTTP Secure λ“±μΌλ΅ λ¶λ¦¬λ” HTTPSλ” HTTPμ— λ°μ΄ν„° μ•”νΈν™”κ°€ μ¶”κ°€λ ν”„λ΅ν† μ½μ΄λ‹¤. 

-  HTTPSλ¥Ό μ‚¬μ©ν•λ©΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄μ λ¨λ“  ν†µμ‹  λ‚΄μ©μ΄ μ•”νΈν™”λλ‹¤.

- HTTPS ν”„λ΅ν† μ½μ€ SSLμ΄λ‚ TLS ν”„λ΅ν† μ½μ„ ν†µν•΄ μ„Έμ… λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ‹¤. SSLμ€ μ„λ²„μ™€ λΈλΌμ°μ € μ‚¬μ΄μ— μ•μ „ν•κ² μ•”νΈν™”λ μ—°κ²°μ„ λ§λ“¤ μ μκ² λ„μ™€μ£Όκ³  μ„λ²„ λΈλΌμ°μ €κ°€ λ―Όκ°ν• μ •λ³΄λ¥Ό μ£Όκ³ λ°›μ„ λ• μ΄κ²ƒμ΄ λ„λ‚λ‹Ήν•λ” κ²ƒμ„ λ§‰μ•„μ¤€λ‹¤.  

- HTTPSλ” 443λ² ν¬νΈλ¥Ό μ‚¬μ©ν•λ©°, λ„¤νΈμ›ν¬ μƒμ—μ„ μ¤‘κ°„μ— μ 3μκ°€ μ •λ³΄λ¥Ό λ³Ό μ μ—†λ„λ΅ κ³µκ°ν‚¤ μ•”νΈν™”λ¥Ό μ§€μ›ν•κ³  μλ‹¤.

### κ³µκ°ν‚¤ & κ°μΈν‚¤
- HTTPSλ” κ³µκ°ν‚¤/κ°μΈν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ΄μ©ν•΄ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ‹¤.
  - κ³µκ°ν‚¤: λ¨λ‘μ—κ² κ³µκ°κ°€λ¥ν• ν‚¤
  - κ°μΈν‚¤: λ‚λ§ κ°€μ§€κ³  μ•κ³  μμ–΄μ•Ό ν•λ” ν‚¤
 

- κ³µκ°ν‚¤/κ°μΈν‚¤ μ•”νΈν™”μ ν¨κ³Ό
  - κ³µκ°ν‚¤ μ•”νΈν™”: κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ¥Ό ν•λ©΄ κ°μΈν‚¤λ΅λ§ λ³µνΈν™”ν•  μ μλ‹¤. 
  -> κ°μΈν‚¤λ” λ‚λ§ κ°€μ§€κ³  μμΌλ―€λ΅, λ‚λ§ λ³Ό μ μλ‹¤.
  - κ°μΈν‚¤ μ•”νΈν™”: κ°μΈν‚¤λ΅ μ•”νΈν™”ν•λ©΄ κ³µκ°ν‚¤λ΅λ§ λ³µνΈν™”ν•  μ μλ‹¤. 
  -> κ³µκ°ν‚¤λ” λ¨λ‘μ—κ² κ³µκ°λμ–΄ μμΌλ―€λ΅, λ‚΄κ°€ μΈμ¦ν• μ •λ³΄μ„μ„ μ•λ ¤ μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•  μ μλ‹¤.

### λ€μΉ­ν‚¤ λ°©μ‹
- μ–‘μ½ λ‹Ήμ‚¬μκ°€ κ³µν†µ λΉ„λ°€ ν‚¤λ¥Ό κ³µμ ν•μ—¬ λ™μΌν• ν‚¤λ΅ μ•”νΈν™”, λ³µνΈν™”κ°€ κ°€λ¥ν•λ‹¤. 

β” **μ¥μ **
- λ€μΉ­ν‚¤λ” λ§¤λ² λλ¤μΌλ΅ μƒμ„±λμ–΄ λ„μ¶λμ–΄λ„ λ‹¤μμ— μ‚¬μ©ν•  λ•λ” λ‹¤λ¥Έ ν‚¤κ°€ μ‚¬μ©λκΈ° λ•λ¬Έμ— μ•μ „ν•λ‹¤.
- κ³µκ°ν‚¤λ³΄λ‹¤ ν†µμ‹  μ†λ„κ°€ λΉ λ¥΄λ‹¤. 

β” **λ‹¨μ **
- μ•”νΈν™” ν†µμ‹ μ„ ν•λ” μ‚¬μ©μλΌλ¦¬ κ°™μ€ λ€μΉ­ν‚¤λ¥Ό κ³µμ ν•΄μ•Όλ§ ν•λ‹¤λ” λ‹¨μ μ΄ μλ‹¤.
  - λ€μΉ­ν‚¤λ¥Ό μ „λ‹¬ν•λ” κ³Όμ •μ—μ„ ν•΄ν‚Ήμ μ„ν—μ— λ…Έμ¶λ  μ μλ‹¤.
  - λ€μΉ­ν‚¤λ” λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” μλ§λ‹¤ ν•„μ”ν•κΈ° λ•λ¬Έμ—, ν†µμ‹ μ„ μ΄ nλ…μ΄ ν•λ‹¤λ©΄ nC2=n(n-1)/2 λ§νΌμ λ€μΉ­ν‚¤ μƒμ„±μ‘μ—…μ΄ ν•„μ”ν•λ‹¤.
- κ²°λ΅ μ μΌλ΅, ν‚¤ κ΄€λ¦¬κ°€ νλ“¤λ‹¤. 

![](https://images.velog.io/images/lck0827/post/ec3741fe-af26-47eb-b74f-aa3ae24a30b8/image.png)


### λΉ„λ€μΉ­ν‚¤ λ°©μ‹
- κ³µκ°ν‚¤, κ°μΈν‚¤ λ‘κ°μ ν‚¤λ¥Ό ν• μμΌλ΅ κ°κ° μ•”νΈν™”/λ³µνΈν™”μ— μ‚¬μ©ν•λ‹¤. 
- κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν•κ²ƒμ€ κ°μΈν‚¤λ΅ λ³µνΈν™” ν•  μ μκ³ , κ°μΈν‚¤λ΅ μ•”νΈν™” ν•κ²ƒμ€ κ³µκ°ν‚¤λ΅ λ³µνΈν™” ν•  μ μλ‹¤. 
- κ³µκ°ν‚¤λ” λ€μΉ­ν‚¤ λ°©μ‹λ³΄λ‹¤ ν›¨μ”¬ μ•μ „ν•μ§€λ§, κ³„μ‚° κ³Όμ •μ΄ λ³µμ΅ν•κ³  μ—°μ‚° λ„μ¤‘ μ»΄ν“¨ν„°μ μμ›μ„ λ§μ΄ μ‚¬μ©ν•κΈ° λ•λ¬Έμ— ν„μ—…μ—μ„λ” κ³µκ°ν‚¤ λ°©μ‹κ³Ό λ€μΉ­ν‚¤ λ°©μ‹μ„ μ μ ν μ΅°ν•©ν•μ—¬ μ‚¬μ©ν•λ‹¤. 

π‘‰ μ΄λ¬ν• SSL λ°©μ‹μ„ μ μ©ν•λ ¤λ©΄ μΈμ¦μ„λ¥Ό λ°κΈ‰λ°›μ•„ μ„λ²„μ— μ μ©μ‹μΌμ•Ό ν•λ‹¤. μΈμ¦μ„λ” μ‚¬μ©μκ°€ μ ‘μ†ν• μ„λ²„κ°€ μ°λ¦¬κ°€ μλ„ν• μ„λ²„κ°€ λ§λ”μ§€λ¥Ό λ³΄μ¥ν•λ” μ—­ν• μ„ ν•λ‹¤. μΈμ¦μ„λ¥Ό λ°κΈ‰ν•λ” κΈ°κ΄€μ„ CA(Certificate Authority)λΌκ³  λ¶€λ¥Έλ‹¤. κ³µμΈμΈμ¦κΈ°κ΄€μ κ²½μ° μ›Ή λΈλΌμ°μ €λ” λ―Έλ¦¬ CA λ¦¬μ¤νΈμ™€ ν•¨κ» κ° CAμ κ³µκ°ν‚¤λ¥Ό μ•κ³  μλ‹¤.

#### β” **λ™μ‘ λ°©μ‹**
**1. μ„λ²„ - μΈμ¦ μ„λ… μ”μ²­μ„(CSR) μƒμ„±**
- μ„λ²„μ—μ„ κ°μΈν‚¤μ™€ κ³µκ°ν‚¤λ¥Ό μμΌλ΅ μƒμ„±ν•λ‹¤. 
- μ„λ²„μ—μ„ μΈμ¦ μ„λ… μ”μ²­μ„(CSR)μ„ λ§λ“ λ‹¤. 
  - SHA256κ³Ό κ°™μ€ ν•΄μ‰¬ μ•κ³ λ¦¬μ¦μΌλ΅ ν•΄μ‹±
  - κµ­κ°€μ½”λ“, λ„μ‹, νμ‚¬λ…, μ΄λ©”μΌ, λ„λ©”μΈ μ£Όμ† λ“±μ΄ λ“¤μ–΄κ°€λ©° μ„λ²„μ κ³µκ°ν‚¤λ„ λ„£λ”λ‹¤. 
  - CAμ— μ „λ‹¬ν•λ‹¤. 

**2. CA - SSL μΈμ¦μ„ λ°κΈ‰**
- CAλ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ μΈμ¦ μ„λ… μ”μ²­μ„(CSR)μ— CAμ κ°μΈν‚¤λ¥Ό ν†µν•΄ μ „μμ„λ…('μ•”νΈν™”'λΌ ν‘ν„ν•μ§€ μ•κ³  'μ „μμ„λ…'μ΄λΌκ³  ν‘ν„)μ„ ν• ν•νƒμΈ SSL μΈμ¦μ„λ¥Ό λ°κΈ‰ν•λ‹¤. 

**3. μ„λ²„ - SSL μΈμ¦μ„ μλ Ή**
- μ„λ²„κ°€ μ•”νΈν™”λ SSL μΈμ¦μ„λ¥Ό CAλ΅λ¶€ν„° λ°›λ”λ‹¤.

![](https://images.velog.io/images/lck0827/post/858ae4f1-fe12-4f7e-abc0-f728c9e61e21/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-10%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%203.25.09.png)

**4. ν΄λΌμ΄μ–ΈνΈ - SSL Handshakeμ μ²« λ²μ§Έ λ‹¨κ³„ : Client Hello**
-  Clientκ°€ μ”μ²­μ„ ν•κ² λλ©΄, κ°€μ¥ λ¨Όμ € Serverμ— 3-Way Handshakeλ¥Ό ν†µν•΄ μ—°κ²°μ„ μ‹λ„ν•λ‹¤.(TCP μ—°κ²°μ„ μ„ν• μ‹λ„)

- 3-Way Handshakeλ¥Ό μ—°κ²°μ΄ μ™„λ£λλ©΄, ν΄λΌμ΄μ–ΈνΈ(λΈλΌμ°μ €)κ°€ Client Hello λ‹¨κ³„λ¥Ό μν–‰

- HTTPSλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ„ μ•κ² λ ν΄λΌμ΄μ–ΈνΈ(λΈλΌμ°μ €)λ” Client Hello λ‹¨κ³„μ—μ„ λ°‘μ μ •λ³΄λ¥Ό λ³΄λ‚Έλ‹¤.
  - λΈλΌμ°μ €κ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹ λ¨μ(Cipher Suites)
  - λΈλΌμ°μ €κ°€ μκ°„μ μΌλ΅ μƒμ„±ν• μ„μμ λ‚μ(Random byte)
  - λ§μ•½ μ΄μ „μ— SSL ν•Έλ“ μ…°μ΄ν¬κ°€ μ™„λ£λ μƒνƒλΌλ©΄, κ·Έλ• μƒμ„±λ μ„Έμ… μ•„μ΄λ””(Session ID)
  - λΈλΌμ°μ €κ°€ μ‚¬μ©ν•λ” SSL νΉμ€ TLS λ²„μ „ μ •λ³΄ (SSL Protocol Version)

**5. μ„λ²„ - SSL HandShakeμ λ‘ λ²μ§Έ λ‹¨κ³„ : Server Hello
Clientκ°€ λ³΄λ‚΄μ¨ Client Hello ν¨ν‚·μ„ λ°›μ•„, λ°‘μ μ •λ³΄λ¥Ό Clientμ—κ² μ‘λ‹µν•λ‹¤.**

- λΈλΌμ°μ €κ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹(Cipher Suite) μ¤‘μ—μ„ ν•λ‚λ¥Ό μ„ νƒν•΄μ„ Clientλ΅ μ „λ‹¬

- Serverκ°€ μμ‹ μ SSL μΈμ¦μ„λ¥Ό Clientλ΅ μ „λ‹¬ν•λ‹¤.
  - SSL μΈμ¦μ„ λ‚΄λ¶€μ— Serverκ°€ λ°ν–‰ν• κ³µκ°ν‚¤κ°€ ν¬ν•¨ (κ°μΈν‚¤λ” Serverκ°€ μ†μ )
  - SSL μΈμ¦μ„λ” CA(Certificate Authority, μΈμ¦ κΈ°κ΄€)μ κ°μΈν‚¤λ΅ β€μ„λ…β€λμ–΄ μκ³ , Serverκ°€ CAλ΅λ¶€ν„° λ―Έλ¦¬ λ°κΈ‰ λ°›μ•„λ†“μ€ μƒνƒ.
  - SSL μΈμ¦ λ‚΄λ¶€μ— κΈ°λ΅λμ–΄ μλ” Serverμ— λ€ν• μ •λ³΄(=μ›λ³Έ λ°μ΄ν„°)
  - μ„λ²„κ°€ μκ°„μ μΌλ΅ μƒμ„±ν• μ„μμ λ‚μ(μ«μ)

**6. ν΄λΌμ΄μ–ΈνΈ - SSL HandShakeμ μ„Έ λ²μ§Έ λ‹¨κ³„ : Premaster Secret μƒμ„±**
-  λΈλΌμ°μ €λ” μ„λ²„μ SSL μΈμ¦μ„κ°€ λ―Ώμ„λ§ν•μ§€ ν™•μΈ.

- Client(λΈλΌμ°μ €)κ°€ SSL μΈμ¦μ„(CAμ_Private_keyλ΅ μ•”νΈν™”(ν•΄μ‹±λ Serverμ— λ€ν• μ •λ³΄))λ¥Ό CAμ Public Keyλ΅ λ””μ½”λ”©ν•΄λ³Έλ‹¤. κ·Έλ¬λ©΄ **Hash(Serverμ— λ€ν• μ •λ³΄)**μ κ°’μ„ μ–»μ„ μ μλ‹¤. κ·Έλ¦¬κ³  **Serverμ— λ€ν• μ •λ³΄**λ¥Ό Hashν™” ν•΄μ„ μ„λ΅ μΌμΉν•λ” μ§€ μ²΄ν¬ν•λ‹¤. μ΄λ¥Ό ν†µν•΄ SSL μΈμ¦μ„κ°€ μ„μ΅° λλ” μ§€ μ—¬λ¶€λ¥Ό μ²΄ν¬ν•  μ μλ‹¤.
π‘‰ λΈλΌμ°μ € λ‚΄λ¶€μ— CAμ Public Keyκ°€ μ €μ¥λμ–΄ μμ.

- λΈλΌμ°μ €λ” μμ‹ μ΄ μƒμ„±ν• λ‚μμ™€ μ„λ²„μ λ‚μλ¥Ό μ‚¬μ©ν•μ—¬ premaster secretμ„ λ§λ“¤μ–΄μ„ Serverλ΅ μ „μ†΅ν•λ‹¤.

- Client(λΈλΌμ°μ €)μ—μ„, μ„λ²„λ΅λ¶€ν„° λ°›μ€ λλ¤κ°’κ³Ό Client(λΈλΌμ°μ €)μ—μ„ μƒμ„±ν• λλ¤κ°’μ„ Serverμ Public Keyλ΅ μ•”νΈν™”ν•λ‹¤. μ΄ μ•”νΈν™”ν• κ°’μ„ premaster secretμ΄λΌκ³  ν•λ©°, μ΄ κ°’μ„ Serverλ΅ μ „λ‹¬ν•λ‹¤.

  -  **Serverμ Publickeyλ΅μ•”νΈν™”(Server λλ¤κ°’ + Client λλ¤κ°’) = premaster secret = μ„Έμ… ν‚¤(session key)**
π‘‰ μ—¬κΈ°μ„ λ§ν•λ” μ„Έμ…μ€, β€μΏ ν‚¤μ™€ μ„Έμ…β€™μ—μ„ λ§ν•λ” μ„Έμ…κ³Όλ” λ‹¤λ¥Έ μλ―Έμ΄λ‹¤.
π‘‰ μ„Έμ… μΆ…λ£κ°€ λμ„ λ• μ„Έμ… ν‚¤λ¥Ό νκΈ°ν•λ‹¤κ³  λμ–΄ μλ”λ°, μ—¬κΈ°μ„ λ§ν•λ” μ„Έμ…μ€ ν• λ²μ ν†µμ‹ μ„ μ• κΈ°ν•λ” κ²ƒμ΄ μ•„λ‹λ‹¤. μ‚¬μ΄νΈμ— ν• λ² μ ‘μ†ν–μ„ λ•λ¶€ν„° μΆ…λ£ν–μ„ λ•κΉμ§€λ¥Ό ν•λ‚μ μ„Έμ…μΌλ΅ λ³Ό μλ„ μλ” κ²ƒμ΄λ‹¤. μ¦‰, μ‚¬μ΄νΈμ— ν• λ² μ ‘μ†ν• μ΄ν›„λ¶€ν„° μΆ…λ£ν•  λ•κΉμ§€ μ„Έμ…μ΄ μΆ…λ£λλ©΄μ„ μ„Έμ… ν‚¤κ°€ νκΈ°λλ” κ²ƒμ€ μ•„λ‹λΌλ” λ§μ΄λ‹¤.

**7. μ„λ²„/ν΄λΌμ΄μ–ΈνΈ - SSL HandShake μΆ…λ£ & HTTPS ν†µμ‹  μ‹μ‘**
- λΈλΌμ°μ €(Client)μ™€ μ„λ²„(Server)λ” SSL handshakeκ°€ μ •μƒμ μΌλ΅ μ™„λ£λμ—κ³ , μ΄μ λ” μ›Ήμƒμ—μ„ λ°μ΄ν„°λ¥Ό μ„Έμ… ν‚¤(session key)λ¥Ό μ‚¬μ©ν•μ—¬ μ•”νΈν™”/λ³µνΈν™”ν•λ©° HTTPS ν”„λ΅ν† μ½μ„ ν†µν•΄ μ£Όκ³ λ°›μ„ μ μλ‹¤. - HTTPS ν†µμ‹ μ΄ μ™„λ£λλ” μ‹μ μ—μ„ μ„λ΅μ—κ² κ³µμ λ μ„Έμ… ν‚¤(session key)λ¥Ό νκΈ°ν•λ‹¤. λ§μ•½ μ„Έμ…(session)μ΄ μ—¬μ „ν μ μ§€λκ³  μλ‹¤λ©΄, λΈλΌμ°μ €λ” SSL handshake μ”μ²­μ΄ μ•„λ‹ μ„Έμ… IDλ§ μ„λ²„μ—κ² μ•λ ¤μ£Όλ©΄ λλ‹¤. 
- Client Hello κ³Όμ •μ—μ„ λ³΄λ©΄ μ΄μ „μ— SSL Handshakeκ°€ μ™„λ£λμ—μ„ λ•, μ„Έμ… μ•„μ΄λ””λ¥Ό Serverν•ν… λ³΄λ‚΄λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤. 

- SSL μΈμ¦μ„ κ³Όμ •μ—λ” λ€μΉ­ν‚¤ λ°©μ‹κ³Ό κ³µκ°ν‚¤ λ°©μ‹ λ‘ κ° λ¨λ‘ μ‚¬μ©λμ—λ‹¤. SSL Handshake λ‹¨κ³„κΉμ§€λ” κ³µκ°ν‚¤ λ°©μ‹, κ·Έ μ΄ν›„μ HTTPS ν†µμ‹ μ€ λ€μΉ­ν‚¤ λ°©μ‹μ„ μ‚¬μ©ν•μ€λ‹¤.

> π™†β€β™‚οΈ **CA(Certificate Authority)λ€?**
> 
- certification authority (CA)λ” κ³µκ°ν‚¤μ™€ κ³µκ° DNSλ…(ex.www.example.com)μ μ—°κ²°μ„ λ³΄μ¥ν•λ” κΈ°κ΄€μ΄λ‹¤. λ”°λΌμ„ μ‹ λΆ°μ„±μ΄ μ—„κ²©ν•κ² κ³µμΈλ κΈ°μ—…λ“¤λ§ μ°Έμ—¬ν•  μ μλ‹¤. 
- μμ‹ λ§μ μ•”νΈν™” ν‚¤λ΅ μ›Ήμ‚¬μ΄νΈμ κ³µκ°ν‚¤λ¥Ό μ•”νΈν•™μ μΌλ΅ μ‚¬μΈν•λ” λ° μ‚¬μ©ν•¨μΌλ΅μ¨ νΉμ • κ³µκ°ν‚¤κ°€ νΉμ • μ‚¬μ΄νΈμ κ³µκ°ν‚¤λΌλ” κ²ƒμ„ λ³΄μ¥ν•λ‹¤. μ΄ μ„λ…μ€ κ³„μ‚°μ μΌλ΅ μ„μ΅°ν•  κ°€λ¥μ„±μ΄ μ—†λ‹¤. λΈλΌμ°μ €(κ·Έ μ™Έ ν΄λΌμ΄μ–ΈνΈ)λ” μ μ•λ ¤μ§„ CSκ°€ μ†μ ν• κ³µκ°ν‚¤λ¥Ό λ³΄κ΄€ν•λ” μ‹ λΆ°ν•  μ μλ” anchor μ €μ¥μ†(trust anchor stores)λ¥Ό μ μ§€ν•κ³  CS μ„λ…μ„ μ•”νΈν•™μ μΌλ΅ ν™•μΈν•λ”λ° μ΄ κ³µκ°ν‚¤λ¥Ό μ‚¬μ©ν•λ‹¤.

> **π™†β€β™‚οΈ SSL(TLS)μ΄λ€?**
HTTPSλ” SSL(Secure Socket Layer)/TLS(Transport Layer Security) μ „μ†΅ κΈ°μ μ„ μ‚¬μ©ν•λ‹¤. TCP, UDPμ™€ κ°™μ€ μΌλ°μ μΈ μΈν„°λ„· ν†µμ‹ μ— μ•μ „ν• κ³„μΈµ(layer)μ„ μ¶”κ°€ν•λ” λ°©μ‹μ΄λ‹¤. κ·Έλ¦¬κ³  μ΄ κΈ°μ μ„ κµ¬ν„ν•κΈ° μ„ν•΄ μ›Ή μ„λ²„μ— μ„¤μΉν•λ” κ²ƒμ΄ SSL/TLS μΈμ¦μ„μ΄λ‹¤. TLSλ” SSLμ κ°μ„  λ²„μ „μ΄λ©°, μµμ‹  μΈμ¦μ„λ” TLSλ¥Ό μ‚¬μ©ν•μ§€λ§ νΈμμ μΌλ΅ SSL μΈμ¦μ„λΌκ³  λ¶λ¦¬μ΄λ‹¤.


#### HTTPSμ μ¥λ‹¨μ 
- HTTPSλ” μ›Ήμ‚¬μ΄νΈμ λ¬΄κ²°μ„±μ„ λ³΄νΈν•΄μ¤€λ‹¤. μ›Ή μ‚¬μ΄νΈμ™€ μ‚¬μ©μ λΈλΌμ°μ € μ‚¬μ΄μ ν†µμ‹ μ„ μΉ¨μ…μκ°€ κ±΄λ“λ¦¬μ§€ λ»ν•λ„λ΅ ν•λ‹¤. (μΉ¨μ…μλΌν•¨μ€, μ•…μκ°€ μλ” κ³µκ²©μλ” λ¬Όλ΅ μ΄κ³ , ν•©λ²•μ΄μ§€λ§ ν†µμ‹ μ— μΉ¨μ…ν•μ—¬ νμ΄μ§€μ— κ΄‘κ³ λ¥Ό μ‚½μ…ν•λ” κ²½μ°λ„ ν•΄λ‹Ήν•λ‹¤.)
- κ°€λ²Όμ΄ μ›Ή μ„ν•‘μ΄λΌλ©΄ HTTPλ„ μƒκ΄€μ—†μ§€λ§, μ‚¬μ©μμ μ •λ³΄λ¥Ό μ›Ή μ„λ²„μ™€ μ£Όκ³  λ°›μ•„μ•Όν•λ” κ²½μ°λΌλ©΄ HTTPλ” μ •λ³΄ μ μ¶μ μ„ν—μ„±μ„ κ°–κ² λλ‹¤. HTTPSλ” μΉ¨μ…μκ°€ μ›Ήμ‚¬μ΄νΈμ™€ μ‚¬μ©μ μ‚¬μ΄μ ν†µμ‹ μ„ λ°λ μμ‹ ν•λ” κ²ƒμ„ λ°©μ§€ν•¨μΌλ΅μ¨ λ³΄μ•μ„ κ°•ν™”ν•΄μ¤€λ‹¤.
- getUserMedia()λ¥Ό ν†µν• μ‚¬μ§„ μ΄¬μμ΄λ‚ μ¤λ””μ¤ λ…Ήμ, ν”„λ΅κ·Έλ μ‹λΈ μ›Ή μ•±κ³Ό κ°™μ€ κ°•λ ¥ν• μ›Ή ν”λ«νΌ μ‹ κΈ°λ¥λ“¤μ€ μ‹¤ν–‰ν•λ ¤λ©΄ μ‚¬μ©μμ λ…μ‹μ μΈ κ¶ν• ν—λ½μ„ ν•„μ”λ΅ ν•λ‹¤. μ§€μ¤λ΅μΌ€μ΄μ… APIμ™€ κ°™μ€ μ¤λλ APIλ“¤λ„ μ‹¤ν–‰ν•  λ• κ¶ν•μ΄ ν•„μ”ν•λ„λ΅ μ—…λ°μ΄νΈλκ³  μλ”λ°, HTTPSλ” μ΄λ¬ν• μƒ κΈ°λ¥κ³Ό μ—…λ°μ΄νΈλ APIμ— λ€ν• κ¶ν• ν—λ½μ„ κ°€λ¥ν•κ² ν•λ‹¤.
- λ„¤μ΄λ²„, λ‹¤μμ€ λ¬Όλ΅ μ΄κ³  κµ¬κΈ€ μ—­μ‹ κ²€μƒ‰ μ—”μ§„ μµμ ν™”(SEO: Search Engine Optimization) κ΄€λ ¨ λ‚΄μ©μ„ HTTPS μ›Ήμ‚¬μ΄νΈμ— λ€ν•΄μ„ μ μ©ν•κ³  μλ‹¤. μ¦‰, ν‚¤μ›λ“ κ²€μƒ‰ μ‹ μƒμ„ λ…Έμ¶λλ” κΈ°μ¤€ μ¤‘ ν•λ‚κ°€ λ³΄μ• μ”μ†μ΄λ‹¤.
- λ¨λ“  μ‚¬μ΄νΈμ—μ„ ν…μ¤νΈλ¥Ό μ•”νΈν™”ν•΄μ„ μ£Όκ³  λ°›μΌλ©΄ κ³Όλ¶€ν•κ°€ κ±Έλ ¤ μ†λ„κ°€ λλ ¤μ§ μ μλ‹¤. μ¤‘μ”ν• μ‚¬μ΄νΈλ” HTTPSλ΅ κ΄€λ¦¬ν•κ³ , κ·Έλ ‡μ§€ μ•μ€ μ‚¬μ΄νΈλ” HTTPλ¥Ό μ‚¬μ©ν•λ‹¤.
- HTTPSλ¥Ό μ§€μ›ν•λ‹¤κ³  ν•΄μ„ λ¬΄μ΅°κ±΄ μ•μ „ν• κ²ƒμ€ μ•„λ‹λ‹¤. μ‹ λΆ°ν•  μ μλ” CA κΈ°μ—…μ΄ μ•„λ‹λΌ μμ²΄μ μΌλ΅ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•  μλ„ μκ³ , μ‹ λΆ°ν•  μ μ—†λ” CA κΈ°μ—…μ„ ν†µν•΄μ„ μΈμ¦μ„λ¥Ό λ°κΈ‰λ°›μ„ μλ„ μκΈ° λ•λ¬Έμ΄λ‹¤.




![](https://images.velog.io/images/lck0827/post/f4661271-0aa5-45fa-9d59-0f57cc6892bc/image.png)


---
π“ **Reference**
1. https://mangkyu.tistory.com/98
2. https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Network/HTTP%20%26%20HTTPS.md
3. https://rachel-kwak.github.io/2021/03/08/HTTPS.html
4. https://jaeseongdev.github.io/development/2021/07/02/HTTPS,SSL,TLS/